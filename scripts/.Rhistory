legend.position="bottom",
legend.direction = "horizontal",
panel.border = element_rect(colour = "black", fill=NA),
legend.background = element_rect(linetype = 2, size = 0.5, colour = 1)) +
annotation_scale(location = "bl", width_hint = 0.4) +
annotation_north_arrow(location = "tl", which_north = "true",
height = unit(0.8, "cm"),  width = unit(0.6, "cm"),
pad_x = unit(0.0, "in"), pad_y = unit(0.0, "in"),
style = north_arrow_orienteering)
ggmap::ggmap(basemap) +
geom_sf(data = counties_filt1, lty = 3, inherit.aes = FALSE) +
geom_sf(data = rds_coarse, inherit.aes = F, colour = 'grey20') +
geom_sf(data = pts, aes(color = scntfcN), inherit.aes = FALSE) +
#  geom_sf(data = mapbb, fill = NA, color = "red", size = 1.0, inherit.aes = F) +
scale_color_manual(values= spp_cols)+
#  coord_sf(xlim = c(bb1[1], bb1[3]), ylim = c(bb1[2], bb1[4])) +
labs(title="Sampled Populations",  x ="", y = "", color = 'Species') +
theme_bw() +
theme(axis.text.x=element_blank(),
axis.text.y = element_blank(),
plot.title = element_text(hjust = 0.5),
legend.position="bottom",
legend.direction = "horizontal",
panel.border = element_rect(colour = "black", fill=NA),
legend.background = element_rect(linetype = 2, size = 0.5, colour = 1)) +
annotation_scale(location = "bl", width_hint = 0.4) +
annotation_north_arrow(location = "tl", which_north = "true",
height = unit(0.8, "cm"),  width = unit(0.6, "cm"),
pad_x = unit(0.0, "in"), pad_y = unit(0.0, "in"),
style = north_arrow_orienteering)
ggmap::ggmap(basemap) +
geom_sf(data = counties_filt1, lty = 3, inherit.aes = FALSE) +
geom_sf(data = rds_coarse, inherit.aes = F, colour = 'grey20') +
geom_sf(data = pts, aes(color = scntfcN), inherit.aes = FALSE) +
#  geom_sf(data = mapbb, fill = NA, color = "red", size = 1.0, inherit.aes = F) +
scale_color_manual(values= spp_cols)+
coord_sf(xlim = c(bb1[1], bb1[3]), ylim = c(bb1[2], bb1[4])) +
labs(title="Sampled Populations",  x ="", y = "", color = 'Species') +
theme_bw() +
theme(axis.text.x=element_blank(),
axis.text.y = element_blank(),
plot.title = element_text(hjust = 0.5),
legend.title = element_blank(),
legend.position="bottom",
legend.direction = "horizontal",
panel.border = element_rect(colour = "black", fill=NA),
legend.background = element_rect(linetype = 2, size = 0.5, colour = 1)) +
annotation_scale(location = "bl", width_hint = 0.4) +
annotation_north_arrow(location = "tl", which_north = "true",
height = unit(0.8, "cm"),  width = unit(0.6, "cm"),
pad_x = unit(0.0, "in"), pad_y = unit(0.0, "in"),
style = north_arrow_orienteering)
ggmap::ggmap(basemap) +
geom_sf(data = counties_filt1, lty = 3, inherit.aes = FALSE) +
geom_sf(data = rds_coarse, inherit.aes = F, colour = 'grey20') +
geom_sf(data = pts, aes(color = scntfcN), inherit.aes = FALSE, size = 2) +
#  geom_sf(data = mapbb, fill = NA, color = "red", size = 1.0, inherit.aes = F) +
scale_color_manual(values= spp_cols)+
coord_sf(xlim = c(bb1[1], bb1[3]), ylim = c(bb1[2], bb1[4])) +
labs(title="Sampled Populations",  x ="", y = "", color = 'Species') +
theme_bw() +
theme(axis.text.x=element_blank(),
axis.text.y = element_blank(),
plot.title = element_text(hjust = 0.5),
legend.title = element_blank(),
legend.position="bottom",
legend.direction = "horizontal",
panel.border = element_rect(colour = "black", fill=NA),
legend.background = element_rect(linetype = 2, size = 0.5, colour = 1)) +
annotation_scale(location = "bl", width_hint = 0.4) +
annotation_north_arrow(location = "tl", which_north = "true",
height = unit(0.8, "cm"),  width = unit(0.6, "cm"),
pad_x = unit(0.0, "in"), pad_y = unit(0.0, "in"),
style = north_arrow_orienteering)
ggmap::ggmap(basemap) +
geom_sf(data = counties_filt1, lty = 3, inherit.aes = FALSE) +
geom_sf(data = rds_coarse, inherit.aes = F, colour = 'grey20') +
geom_sf(data = pts, aes(color = scntfcN), inherit.aes = FALSE, size = 1.5) +
#  geom_sf(data = mapbb, fill = NA, color = "red", size = 1.0, inherit.aes = F) +
scale_color_manual(values= spp_cols)+
coord_sf(xlim = c(bb1[1], bb1[3]), ylim = c(bb1[2], bb1[4])) +
labs(title="Sampled Populations",  x ="", y = "", color = 'Species') +
theme_bw() +
theme(axis.text.x=element_blank(),
axis.text.y = element_blank(),
plot.title = element_text(hjust = 0.5),
legend.title = element_blank(),
legend.position="bottom",
legend.direction = "horizontal",
panel.border = element_rect(colour = "black", fill=NA),
legend.background = element_rect(linetype = 2, size = 0.5, colour = 1)) +
annotation_scale(location = "bl", width_hint = 0.4) +
annotation_north_arrow(location = "tl", which_north = "true",
height = unit(0.8, "cm"),  width = unit(0.6, "cm"),
pad_x = unit(0.0, "in"), pad_y = unit(0.0, "in"),
style = north_arrow_orienteering)
ggmap::ggmap(basemap) +
geom_sf(data = counties_filt1, lty = 3, inherit.aes = FALSE) +
geom_sf(data = rds_coarse, inherit.aes = F, colour = 'grey20') +
geom_sf(data = pts, aes(color = scntfcN), inherit.aes = FALSE, size = 1.5) +
#  geom_sf(data = mapbb, fill = NA, color = "red", size = 1.0, inherit.aes = F) +
scale_color_manual(values= spp_cols)+
coord_sf(xlim = c(bb1[1], bb1[3]), ylim = c(bb1[2], bb1[4])) +
labs(title="Sampled Populations",  x ="", y = "", color = 'Species') +
theme_bw() +
theme(axis.text.x=element_blank(),
axis.text.y = element_blank(),
plot.title = element_text(hjust = 0.5),
panel.grid.minor=element_blank(),
legend.title = element_blank(),
legend.position="bottom",
legend.direction = "horizontal",
panel.border = element_rect(colour = "black", fill=NA),
legend.background = element_rect(linetype = 2, size = 0.5, colour = 1)) +
annotation_scale(location = "bl", width_hint = 0.4) +
annotation_north_arrow(location = "tl", which_north = "true",
height = unit(0.8, "cm"),  width = unit(0.6, "cm"),
pad_x = unit(0.0, "in"), pad_y = unit(0.0, "in"),
style = north_arrow_orienteering)
ggmap::ggmap(basemap) +
geom_sf(data = counties_filt1, lty = 3, inherit.aes = FALSE) +
geom_sf(data = rds_coarse, inherit.aes = F, colour = 'grey20') +
geom_sf(data = pts, aes(color = scntfcN), inherit.aes = FALSE, size = 1.5) +
#  geom_sf(data = mapbb, fill = NA, color = "red", size = 1.0, inherit.aes = F) +
scale_color_manual(values= spp_cols)+
coord_sf(xlim = c(bb1[1], bb1[3]), ylim = c(bb1[2], bb1[4])) +
labs(title="Sampled Populations",  x ="", y = "", color = 'Species') +
theme_bw() +
theme(axis.text.x=element_blank(),
axis.text.y = element_blank(),
axis.ticks.y = element_blank(),
axis.ticks.y = element_blank(),
plot.title = element_text(hjust = 0.5),
legend.title = element_blank(),
legend.position="bottom",
legend.direction = "horizontal",
panel.border = element_rect(colour = "black", fill=NA),
legend.background = element_rect(linetype = 2, size = 0.5, colour = 1)) +
annotation_scale(location = "bl", width_hint = 0.4) +
annotation_north_arrow(location = "tl", which_north = "true",
height = unit(0.8, "cm"),  width = unit(0.6, "cm"),
pad_x = unit(0.0, "in"), pad_y = unit(0.0, "in"),
style = north_arrow_orienteering)
ggmap::ggmap(basemap) +
geom_sf(data = counties_filt1, lty = 3, inherit.aes = FALSE) +
geom_sf(data = rds_coarse, inherit.aes = F, colour = 'grey20') +
geom_sf(data = pts, aes(color = scntfcN), inherit.aes = FALSE, size = 1.5) +
#  geom_sf(data = mapbb, fill = NA, color = "red", size = 1.0, inherit.aes = F) +
scale_color_manual(values= spp_cols)+
coord_sf(xlim = c(bb1[1], bb1[3]), ylim = c(bb1[2], bb1[4])) +
labs(title="Sampled Populations",  x ="", y = "", color = 'Species') +
theme_bw() +
theme(axis.text.x=element_blank(),
axis.text.y = element_blank(),
axis.ticks.x = element_blank(),
axis.ticks.y = element_blank(),
plot.title = element_text(hjust = 0.5),
legend.title = element_blank(),
legend.position="bottom",
legend.direction = "horizontal",
panel.border = element_rect(colour = "black", fill=NA),
legend.background = element_rect(linetype = 2, size = 0.5, colour = 1)) +
annotation_scale(location = "bl", width_hint = 0.4) +
annotation_north_arrow(location = "tl", which_north = "true",
height = unit(0.8, "cm"),  width = unit(0.6, "cm"),
pad_x = unit(0.0, "in"), pad_y = unit(0.0, "in"),
style = north_arrow_orienteering)
ggmap::ggmap(basemap) +
geom_sf(data = counties_filt1, lty = 3, inherit.aes = FALSE) +
geom_sf(data = rds_coarse, inherit.aes = F, colour = 'grey20') +
geom_sf(data = pts, aes(color = scntfcN), inherit.aes = FALSE, size = 2) +
#  geom_sf(data = mapbb, fill = NA, color = "red", size = 1.0, inherit.aes = F) +
scale_color_manual(values= spp_cols)+
coord_sf(xlim = c(bb1[1], bb1[3]), ylim = c(bb1[2], bb1[4])) +
labs(title="Sampled Populations",  x ="", y = "", color = 'Species') +
theme_bw() +
theme(axis.text.x=element_blank(),
axis.text.y = element_blank(),
axis.ticks.x = element_blank(),
axis.ticks.y = element_blank(),
plot.title = element_text(hjust = 0.5),
legend.title = element_blank(),
legend.position="bottom",
legend.direction = "horizontal",
panel.border = element_rect(colour = "black", fill=NA),
legend.background = element_rect(linetype = 2, size = 0.5, colour = 1)) +
annotation_scale(location = "bl", width_hint = 0.4) +
annotation_north_arrow(location = "tl", which_north = "true",
height = unit(0.8, "cm"),  width = unit(0.6, "cm"),
pad_x = unit(0.0, "in"), pad_y = unit(0.0, "in"),
style = north_arrow_orienteering)
coarse_bm <- ggmap::ggmap(basemap) +
geom_sf(data = counties_filt1, lty = 3, inherit.aes = FALSE) +
geom_sf(data = rds_coarse, inherit.aes = F, colour = 'grey20') +
geom_sf(data = pts, aes(color = scntfcN), inherit.aes = FALSE, size = 2) +
#  geom_sf(data = mapbb, fill = NA, color = "red", size = 1.0, inherit.aes = F) +
scale_color_manual(values= spp_cols)+
coord_sf(xlim = c(bb1[1], bb1[3]), ylim = c(bb1[2], bb1[4])) +
labs(title="Sampled Populations",  x ="", y = "", color = 'Species') +
theme_bw() +
theme(axis.text.x=element_blank(),
axis.text.y = element_blank(),
axis.ticks.x = element_blank(),
axis.ticks.y = element_blank(),
plot.title = element_text(hjust = 0.5),
legend.title = element_blank(),
legend.position="bottom",
legend.direction = "horizontal",
panel.border = element_rect(colour = "black", fill=NA),
legend.background = element_rect(linetype = 2, size = 0.5, colour = 1)) +
annotation_scale(location = "bl", width_hint = 0.4) +
annotation_north_arrow(location = "tl", which_north = "true",
height = unit(0.8, "cm"),  width = unit(0.6, "cm"),
pad_x = unit(0.0, "in"), pad_y = unit(0.0, "in"),
style = north_arrow_orienteering)
#coarse_bm <-
ggmap::ggmap(basemap) +
geom_sf(data = counties_filt1, lty = 3, inherit.aes = FALSE) +
geom_sf(data = rds_coarse, inherit.aes = F, colour = 'grey20') +
geom_sf(data = pts, aes(color = scntfcN), inherit.aes = FALSE, size = 2) +
geom_sf(data = windows[29], fill = NA, color = "red", size = 1.0, inherit.aes = F) +
scale_color_manual(values= spp_cols)+
coord_sf(xlim = c(bb1[1], bb1[3]), ylim = c(bb1[2], bb1[4])) +
labs(title="Sampled Populations",  x ="", y = "", color = 'Species') +
theme_bw() +
theme(axis.text.x=element_blank(),
axis.text.y = element_blank(),
axis.ticks.x = element_blank(),
axis.ticks.y = element_blank(),
plot.title = element_text(hjust = 0.5),
legend.title = element_blank(),
legend.position="bottom",
legend.direction = "horizontal",
panel.border = element_rect(colour = "black", fill=NA),
legend.background = element_rect(linetype = 2, size = 0.5, colour = 1)) +
annotation_scale(location = "bl", width_hint = 0.4) +
annotation_north_arrow(location = "tl", which_north = "true",
height = unit(0.8, "cm"),  width = unit(0.6, "cm"),
pad_x = unit(0.0, "in"), pad_y = unit(0.0, "in"),
style = north_arrow_orienteering)
#coarse_bm <-
ggmap::ggmap(basemap) +
geom_sf(data = counties_filt1, lty = 3, inherit.aes = FALSE) +
geom_sf(data = rds_coarse, inherit.aes = F, colour = 'grey20') +
geom_sf(data = pts, aes(color = scntfcN), inherit.aes = FALSE, size = 2) +
geom_sf(data = windows[29,], fill = NA, color = "red", size = 1.0, inherit.aes = F) +
scale_color_manual(values= spp_cols)+
coord_sf(xlim = c(bb1[1], bb1[3]), ylim = c(bb1[2], bb1[4])) +
labs(title="Sampled Populations",  x ="", y = "", color = 'Species') +
theme_bw() +
theme(axis.text.x=element_blank(),
axis.text.y = element_blank(),
axis.ticks.x = element_blank(),
axis.ticks.y = element_blank(),
plot.title = element_text(hjust = 0.5),
legend.title = element_blank(),
legend.position="bottom",
legend.direction = "horizontal",
panel.border = element_rect(colour = "black", fill=NA),
legend.background = element_rect(linetype = 2, size = 0.5, colour = 1)) +
annotation_scale(location = "bl", width_hint = 0.4) +
annotation_north_arrow(location = "tl", which_north = "true",
height = unit(0.8, "cm"),  width = unit(0.6, "cm"),
pad_x = unit(0.0, "in"), pad_y = unit(0.0, "in"),
style = north_arrow_orienteering)
#coarse_bm <-
ggmap::ggmap(basemap) +
geom_sf(data = counties_filt1, lty = 3, inherit.aes = FALSE) +
geom_sf(data = rds_coarse, inherit.aes = F, colour = 'grey20') +
geom_sf(data = pts, aes(color = scntfcN), inherit.aes = FALSE, size = 2) +
geom_sf(data = windows[12,], fill = NA, color = "red", size = 1.0, inherit.aes = F) +
scale_color_manual(values= spp_cols)+
coord_sf(xlim = c(bb1[1], bb1[3]), ylim = c(bb1[2], bb1[4])) +
labs(title="Sampled Populations",  x ="", y = "", color = 'Species') +
theme_bw() +
theme(axis.text.x=element_blank(),
axis.text.y = element_blank(),
axis.ticks.x = element_blank(),
axis.ticks.y = element_blank(),
plot.title = element_text(hjust = 0.5),
legend.title = element_blank(),
legend.position="bottom",
legend.direction = "horizontal",
panel.border = element_rect(colour = "black", fill=NA),
legend.background = element_rect(linetype = 2, size = 0.5, colour = 1)) +
annotation_scale(location = "bl", width_hint = 0.4) +
annotation_north_arrow(location = "tl", which_north = "true",
height = unit(0.8, "cm"),  width = unit(0.6, "cm"),
pad_x = unit(0.0, "in"), pad_y = unit(0.0, "in"),
style = north_arrow_orienteering)
coarse_mp_drwr <- function(x){
this_window <- windows[x,]
output <- coarse_bm +
geom_sf(data = this_window, fill = NA, color = "red", size = 1.0, inherit.aes = F)
window_basemap <- paste0(tmpdir = paste0(
here(), '/data/basemap_imagery/coarse_bm', x$windowID))
saveRDS(output, file = window_basemap)
}
coarse_mp_drwr <- function(x){
this_window <- windows[x,]
output <- coarse_bm +
geom_sf(data = this_window, fill = NA, color = "red", size = 1.0, inherit.aes = F)
window_basemap <- paste0(tmpdir = paste0(
here(), '/data/basemap_imagery/coarse_bm', x$windowID))
saveRDS(output, file = window_basemap)
}
windowsL <- split(windows, ~windowID)
lapply(windowsL, coarse_mp_drwr)
windows_basemap <- paste0(paste0(here(), '/data/basemap_imagery/'),
list.files(paste0(here(), '/data/basemap_imagery')
))
coarse_bm <- windows_basemap[str_detect(windows_basemap, 'coarse')]
coarse_bm <- windows_basemap[str_detect(windows_basemap, 'coarse')]
coarse_bm[1]
coarse_bm <- windows_basemap[str_detect(windows_basemap, 'coarse')]
readRDS(coarse_bm)
BB <- readRDS(coarse_bm[1])
BB
ggmap::(B)
ggmap::ggmap(B)
ggmap::ggmap(BB)
View(pts)
rm(coarse_mp_drwr)
rm(wndws_basemap_dl)
pts <- pts %>% mutate(PL_ID = 1:nrow(.))
grps_basemap_dl <- function(x){
gg_bb <- st_bbox(x)
names(gg_bb) <- c('left', 'bottom', 'right', 'top')
gg_bm <- ggmap::get_stamenmap(gg_bb, zoom = 16, maptype = "terrain")
window_basemap <- paste0(tmpdir = paste0(
here(), '/data/basemap_imagery/group_bm', x$pts))
saveRDS(gg_bm, file = window_basemap)
Sys.sleep(3) # three seconds
}
rm(wndws_basemap_dl, windowsL)
groupsL <- split(pts, ~PL_ID)
lapply(windowsL[1], wndws_basemap_dl)
lapply(windowsL[1], grps_basemap_dl)
lapply(groupsL[1], grps_basemap_dl)
grps_basemap_dl <- function(x){
gg_bb <- st_bbox(x)
names(gg_bb) <- c('left', 'bottom', 'right', 'top')
gg_bm <- ggmap::get_stamenmap(gg_bb, zoom = 15, maptype = "terrain")
window_basemap <- paste0(tmpdir = paste0(
here(), '/data/basemap_imagery/group_bm', x$pts))
saveRDS(gg_bm, file = window_basemap)
Sys.sleep(3) # three seconds
}
lapply(groupsL[1], grps_basemap_dl)
pts <- pts %>% mutate(PL_ID = 1:nrow(.)) %>%
st_transform(4326)
grps_basemap_dl <- function(x){
gg_bb <- st_bbox(x)
names(gg_bb) <- c('left', 'bottom', 'right', 'top')
gg_bm <- ggmap::get_stamenmap(gg_bb, zoom = 15, maptype = "terrain")
window_basemap <- paste0(tmpdir = paste0(
here(), '/data/basemap_imagery/group_bm', x$pts))
saveRDS(gg_bm, file = window_basemap)
Sys.sleep(3) # three seconds
}
groupsL <- split(pts, ~PL_ID)
lapply(groupsL[1], grps_basemap_dl)
windows_basemap <- paste0(paste0(here(), '/data/basemap_imagery/'),
list.files(paste0(here(), '/data/basemap_imagery')
))
group_bm <- windows_basemap[str_detect(windows_basemap, 'group')]
BB <- readRDS(group_bm[1])
ggmap::ggmap(B) +
geom_sf(data = cnty_rds,  inherit.aes = FALSE, colour = 'grey40') +
geom_sf(data = rds_coarse, inherit.aes = F, colour = 'grey20') +
geom_sf_label(data = rds_coarse, aes(label = FULLNAME), colour = "grey10", inherit.aes = FALSE) +
geom_sf_label(data = co_places, aes(label = NAME),inherit.aes = F, colour = "grey10") +
geom_sf(data = pts, aes(color = scntfcN), inherit.aes = FALSE, size = 5) +
#  coord_sf(xlim = c(B[1], B[3]),
#           ylim = c(B[2], B[4])) +
theme(axis.text.x = element_text(angle = 45, vjust = 0.7, hjust=0.5),
axis.text.y = element_text(angle = 45, vjust = 0.7, hjust=0.5),
legend.position = "none") +
xlab(NULL) +
ylab(NULL)
ggmap::ggmap(BB) +
geom_sf(data = cnty_rds,  inherit.aes = FALSE, colour = 'grey40') +
geom_sf(data = rds_coarse, inherit.aes = F, colour = 'grey20') +
geom_sf_label(data = rds_coarse, aes(label = FULLNAME), colour = "grey10", inherit.aes = FALSE) +
geom_sf_label(data = co_places, aes(label = NAME),inherit.aes = F, colour = "grey10") +
geom_sf(data = pts, aes(color = scntfcN), inherit.aes = FALSE, size = 5) +
#  coord_sf(xlim = c(B[1], B[3]),
#           ylim = c(B[2], B[4])) +
theme(axis.text.x = element_text(angle = 45, vjust = 0.7, hjust=0.5),
axis.text.y = element_text(angle = 45, vjust = 0.7, hjust=0.5),
legend.position = "none") +
xlab(NULL) +
ylab(NULL)
grps_basemap_dl <- function(x){
gg_bb <- st_bbox(x)
names(gg_bb) <- c('left', 'bottom', 'right', 'top')
gg_bm <- ggmap::get_stamenmap(gg_bb, zoom = 15, maptype = "terrain")
window_basemap <- paste0(tmpdir = paste0(
here(), '/data/basemap_imagery/group_bm', x$pts))
saveRDS(gg_bm, file = window_basemap)
Sys.sleep(3) # three seconds
}
groupsL <- split(pts, ~PL_ID)
lapply(groupsL[1], grps_basemap_dl)
windows_basemap <- paste0(paste0(here(), '/data/basemap_imagery/'),
list.files(paste0(here(), '/data/basemap_imagery')
))
group_bm <- windows_basemap[str_detect(windows_basemap, 'group')]
BB <- readRDS(group_bm[1])
ggmap::ggmap(BB) +
geom_sf(data = cnty_rds,  inherit.aes = FALSE, colour = 'grey40') +
geom_sf(data = rds_coarse, inherit.aes = F, colour = 'grey20') +
geom_sf_label(data = rds_coarse, aes(label = FULLNAME), colour = "grey10", inherit.aes = FALSE) +
geom_sf_label(data = co_places, aes(label = NAME),inherit.aes = F, colour = "grey10") +
geom_sf(data = pts, aes(color = scntfcN), inherit.aes = FALSE, size = 5) +
#  coord_sf(xlim = c(B[1], B[3]),
#           ylim = c(B[2], B[4])) +
theme(axis.text.x = element_text(angle = 45, vjust = 0.7, hjust=0.5),
axis.text.y = element_text(angle = 45, vjust = 0.7, hjust=0.5),
legend.position = "none") +
xlab(NULL) +
ylab(NULL)
lapply(groupsL[4], grps_basemap_dl)
View(pts)
grps_basemap_dl <- function(x){
gg_bb <- st_bbox(x)
names(gg_bb) <- c('left', 'bottom', 'right', 'top')
gg_bm <- ggmap::get_stamenmap(gg_bb, zoom = 15, maptype = "terrain")
window_basemap <- paste0(tmpdir = paste0(
here(), '/data/basemap_imagery/group_bm', x$PL_ID))
saveRDS(gg_bm, file = window_basemap)
Sys.sleep(3) # three seconds
}
grps_basemap_dl <- function(x){
gg_bb <- st_bbox(x)
names(gg_bb) <- c('left', 'bottom', 'right', 'top')
gg_bm <- ggmap::get_stamenmap(gg_bb, zoom = 15, maptype = "terrain")
window_basemap <- paste0(tmpdir = paste0(
here(), '/data/basemap_imagery/group_bm', x$PL_ID))
saveRDS(gg_bm, file = window_basemap)
Sys.sleep(3) # three seconds
}
groupsL <- split(pts, ~PL_ID)
lapply(groupsL[1], grps_basemap_dl)
windows_basemap <- paste0(paste0(here(), '/data/basemap_imagery/'),
list.files(paste0(here(), '/data/basemap_imagery')
))
group_bm <- windows_basemap[str_detect(windows_basemap, 'group')]
BB <- readRDS(group_bm[1])
B <- readRDS(windows_basemap[39])
# let us see if we can set this up so that we take the centroid of the rds coarse per window????
ggmap::ggmap(B) +
geom_sf(data = cnty_rds,  inherit.aes = FALSE, colour = 'grey40') +
geom_sf(data = rds_coarse, inherit.aes = F, colour = 'grey20') +
geom_sf_label(data = rds_coarse, aes(label = FULLNAME), colour = "grey10", inherit.aes = FALSE) +
geom_sf_label(data = co_places, aes(label = NAME),inherit.aes = F, colour = "grey10") +
geom_sf(data = pts, aes(color = scntfcN), inherit.aes = FALSE, size = 5) +
#  coord_sf(xlim = c(B[1], B[3]),
#           ylim = c(B[2], B[4])) +
theme(axis.text.x = element_text(angle = 45, vjust = 0.7, hjust=0.5),
axis.text.y = element_text(angle = 45, vjust = 0.7, hjust=0.5),
legend.position = "none") +
xlab(NULL) +
ylab(NULL) +
annotation_scale(location = "bl", width_hint = 0.4) +
annotation_north_arrow(location = "tl", which_north = "true",
height = unit(0.8, "cm"),  width = unit(0.6, "cm"),
pad_x = unit(0.0, "in"), pad_y = unit(0.0, "in"),
style = north_arrow_orienteering)
View(B)
intermediate_bm <- windows_basemap[str_detect(windows_basemap, 'window')]
B <- readRDS(windows_basemap[39])
# let us see if we can set this up so that we take the centroid of the rds coarse per window????
ggmap::ggmap(B) +
geom_sf(data = cnty_rds,  inherit.aes = FALSE, colour = 'grey40') +
geom_sf(data = rds_coarse, inherit.aes = F, colour = 'grey20') +
geom_sf_label(data = rds_coarse, aes(label = FULLNAME), colour = "grey10", inherit.aes = FALSE) +
geom_sf_label(data = co_places, aes(label = NAME),inherit.aes = F, colour = "grey10") +
geom_sf(data = pts, aes(color = scntfcN), inherit.aes = FALSE, size = 5) +
#  coord_sf(xlim = c(B[1], B[3]),
#           ylim = c(B[2], B[4])) +
theme(axis.text.x = element_text(angle = 45, vjust = 0.7, hjust=0.5),
axis.text.y = element_text(angle = 45, vjust = 0.7, hjust=0.5),
legend.position = "none") +
xlab(NULL) +
ylab(NULL) +
annotation_scale(location = "bl", width_hint = 0.4) +
annotation_north_arrow(location = "tl", which_north = "true",
height = unit(0.8, "cm"),  width = unit(0.6, "cm"),
pad_x = unit(0.0, "in"), pad_y = unit(0.0, "in"),
style = north_arrow_orienteering)
intermediate_bm
B <- readRDS(windows_basemap[29])
# let us see if we can set this up so that we take the centroid of the rds coarse per window????
ggmap::ggmap(B) +
geom_sf(data = cnty_rds,  inherit.aes = FALSE, colour = 'grey40') +
geom_sf(data = rds_coarse, inherit.aes = F, colour = 'grey20') +
geom_sf_label(data = rds_coarse, aes(label = FULLNAME), colour = "grey10", inherit.aes = FALSE) +
geom_sf_label(data = co_places, aes(label = NAME),inherit.aes = F, colour = "grey10") +
geom_sf(data = pts, aes(color = scntfcN), inherit.aes = FALSE, size = 5) +
#  coord_sf(xlim = c(B[1], B[3]),
#           ylim = c(B[2], B[4])) +
theme(axis.text.x = element_text(angle = 45, vjust = 0.7, hjust=0.5),
axis.text.y = element_text(angle = 45, vjust = 0.7, hjust=0.5),
legend.position = "none") +
xlab(NULL) +
ylab(NULL) +
annotation_scale(location = "bl", width_hint = 0.4) +
annotation_north_arrow(location = "tl", which_north = "true",
height = unit(0.8, "cm"),  width = unit(0.6, "cm"),
pad_x = unit(0.0, "in"), pad_y = unit(0.0, "in"),
style = north_arrow_orienteering)
